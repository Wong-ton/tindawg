<!DOCTYPE html>
<html>
  <head>
    <title>User Show Page</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link href="/css/style.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Lobster|Blinker:600|Baloo+Da|Pacifico|Rubik&display=swap" rel="stylesheet">

  </head>
  <body>
    <header>
        <h1><a class="logo" href="/dogs">Tindawg</a></h1>
    </header>

<%  if(isLogged===false){%>
    <%- include ../partials/loggedOutNav.ejs%>
    <%}else{%>
    <%- include ../partials/loggedInNav.ejs%>
    <%}%>

      <h2>My Page</h2>
    <main>
    <div class="flex-container">
      <div class="flex-box-user">
        <h4>Info</h4>
        <ul>
          <li>Name: <%=user.name%></li>
          <li>Username: <%=user.username%></li>
          <li>Email: <%=user.email%></li>
          <li>Phone Number: <%=user.phone%></li>
          <li>Address: <%=user.location%></li>
        </ul>
        <a id="userShowInfoEdit" href="/users/<%=user._id%>/edit" class="btn btn-secondary">Edit</a>
      </div>

      <div class="flex-box-user">
          <h4>My Dogs</h4>
          <ul>
            <% for (let i = 0; i < user.dogs.length; i++) {%>
              <li><a href="/dogs/<%=user.dogs[i]._id%>"><%=user.dogs[i].name%></a><br/>
                  <form action="/dogs/<%=user.dogs[i]._id%>?_method=DELETE" method="POST">
                  <a href="/dogs/<%=user.dogs[i]._id%>/edit" class="btn btn-secondary">Edit</a>
                      <button type="submit" class="btn btn-dark">Delete</button>
                  </form>
              </li>
            <%}%>
          </ul>
          <a href="/dogs/new"> Add a dog </a>
      </div>



      <div class="flex-box-user">
          <h4>Requests</h4>
          <ul>
              <% for (let i = 0; i < request.requests.length; i++) {%>
              

<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModalCenter<%=i%>">
  <%=request.requests[i].name%>
</button>

<div class="modal fade" id="exampleModalCenter<%=i%>" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">Request to <%=request.requests[i].name%></h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        Requestor: <%=request.requests[i].requestorName%><br/>
        Email: <%=request.requests[i].requestorEmail%><br/>
        Phone: <%=request.requests[i].requestorPhone%><br/>
        Message: <%=request.requests[i].requestorMessage%><br/>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <form action="/users/requests/<%=request.requests[i]._id%>?_method=DELETE" method="POST">
          <button type="submit" class="btn btn-dark">Delete</button>
        </form>
      </div>
    </div>
  </div>
</div>
            <%}%>
          </ul>
      </div>
    </div>

    </main>
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
  </body>
</html>
